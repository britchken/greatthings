<!--


/*
 *
 * Copyright 2015 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

-->

<!DOCTYPE html>
<html>
<head>
<div id="king" onclick="clickMe()" class='jell'><img src="normal.png"></div>

<div class='back'>
  <img src="seaweed1.png"></img>
</div>

<div class='front'>
  <img src="seaweed2.png"></img>
</div>

<div class='jell'>
  <div class='innerText'></div>
  <img src="normal.png">
  <div class='snooze'>
    <img src="hs.jpg"></img>
  </div>
</div>
<div class='jell'>
  <div class='innerText'></div>
  <img src="normal.png">
  <div class='snooze'>
    <img src="hs.jpg"></img>
  </div>
</div>
<div class='jell'>
  <div class='innerText'></div>
  <img src="normal.png">
  <div class='snooze'>
    <img src="hs.jpg"></img>
  </div>
</div>
<div class='jell'>
  <div class='innerText'></div>
  <img src="normal.png">
  <div class='snooze'>
    <img src="hs.jpg"></img>
  </div>
</div>
<div class='jell'>
  <div class='innerText'></div>
  <img src="normal.png">
  <div class='snooze'>
    <img src="hs.jpg"></img>
  </div>
</div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>
<div class='jell'><img src="normal.png"></div>




<div id="clouds">
    <div class="cloud x1"></div>
    <div class="cloud x2"></div>
    <div class="cloud x3"></div>
    <div class="cloud x4"></div>
    <div class="cloud x5"></div>
</div>

<div id="fclouds">
    <div class="fcloud x11"></div>
    <div class="fcloud x12"></div>
    <div class="fcloud x13"></div>
    <div class="fcloud x14"></div>
    <div class="fcloud x15"></div>
</div>


<div id="loader-wrapper">
            <div id="loader"></div>

            <div class="loader-section section-left"></div>
            <div class="loader-section section-right"></div>

        </div>


<link rel="stylesheet" type="text/css" href="looks.css">
<script type="text/javascript" src="jquery-3.0.0.min.js"></script>
<script type="text/javascript" src="jquery-css-transform.js"></script>
<script type="text/javascript" src="jquery-animate-css-rotate-scale.js"></script>    
<script type="text/javascript" src="jquery.easing.1.3.js"></script>






  <title>Jelly Friends</title>
  <!-- JavaScript specific to this application that is not related to API
     calls
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js" ></script>-->
  <meta name="google-signin-client_id" content="939186601674-desadjogrvrjqji1s49ai0od56hk9apq.apps.googleusercontent.com"></meta>
</head>
<body>
  <div id="gConnect">
    <div id="signin-button"></div>
  </div>
  <div id="authOps" style="display:none">
    <button id="signOut" onclick="auth2.signOut()">Sign Out</button>

    <div id="profile"></div>

    <div id="visiblePeople"></div>

    <pre id="authResult"></pre>

  </div>
  <div id="loaderror">
    This section will be hidden by jQuery. If you can see this message, you
    may be viewing the file rather than running a web server.<br />
    The sample must be run from http or https. See instructions at
    <a href="https://developers.google.com/+/quickstart/javascript">
    https://developers.google.com/+/quickstart/javascript</a>.
  </div>
<script type="text/javascript">
var auth2 = {};
var helper = (function() {
  return {
    /**
     * Hides the sign in button and starts the post-authorization operations.
     *
     * @param {Object} authResult An Object which contains the access token and
     *   other authentication information.
     */
    onSignInCallback: function(authResult) {
      if (authResult.isSignedIn.get()) {
        $('#authOps').show('slow');
        $('#gConnect').hide();
        helper.profile();
        helper.people();
      } else {
          if (authResult['error'] || authResult.currentUser.get().getAuthResponse() == null) {
            // There was an error, which means the user is not signed in.
            // As an example, you can handle by writing to the console:
            console.log('There was an error: ' + authResult['error']);
          }
          $('#authOps').hide('slow');
          $('#gConnect').show();
      }
    },

    /**
     * Gets and renders the list of people visible to this app.
     */
    people: function() {
      gapi.client.plus.people.list({
        'userId': 'me',
        'collection': 'visible'
      }).then(function(res) {
        var people = res.result;
        $('#visiblePeople').empty();
        $('#visiblePeople').append('Number of people visible to this app: ' +
            people.totalItems + '<br/>');
        
        $(".jell img").each(function(index, jell) {
          if (index < people.totalItems) {
            $(jell).attr("src", people.items[index].image.url);
            }
        });

        $(".innerText").each(function(index, txt) {
          if (index < people.totalItems) {
            $(txt).append(people.items[index].name);
            }
        });

      });
    },

    /**
     * Gets and renders the currently signed in user's profile data.
     */
    profile: function(){
      gapi.client.plus.people.get({
        'userId': 'me'
      }).then(function(res) {
        var profile = res.result;
        console.log(profile);

        $("#king img").attr("src", profile.image.url);

      }, function(err) {
        var error = err.result;
        $('#profile').empty();
        $('#profile').append(error.message);
      });
    }
  };
})();

/**
 * jQuery initialization
 */
$(document).ready(function() {
  $('#loaderror').hide();
  if ($('meta')[0].content == 'YOUR_CLIENT_ID') {
    alert('This sample requires your OAuth credentials (client ID) ' +
        'from the Google APIs console:\n' +
        '    https://code.google.com/apis/console/#:access\n\n' +
        'Find and replace YOUR_CLIENT_ID with your client ID.'
    );
  }
  animateDivStart();
});

/**
 * Handler for when the sign-in state changes.
 *
 * @param {boolean} isSignedIn The new signed in state.
 */
var updateSignIn = function() {
  console.log('update sign in state');
  if (auth2.isSignedIn.get()) {
    console.log('signed in');
    helper.onSignInCallback(gapi.auth2.getAuthInstance());
  }else{
    console.log('signed out');
    helper.onSignInCallback(gapi.auth2.getAuthInstance());
  }
}

/**
 * This method sets up the sign-in listener after the client library loads.
 */
function startApp() {
  gapi.load('auth2', function() {
    gapi.client.load('plus','v1').then(function() {
      gapi.signin2.render('signin-button', {
          scope: 'https://www.googleapis.com/auth/plus.login',
          fetch_basic_profile: false });
      gapi.auth2.init({fetch_basic_profile: false,
          scope:'https://www.googleapis.com/auth/plus.login'}).then(
            function (){
              auth2 = gapi.auth2.getAuthInstance();
              auth2.isSignedIn.listen(updateSignIn);
              auth2.then(updateSignIn);
            });
    });
  });
}
</script>
<script src="https://apis.google.com/js/client:platform.js?onload=startApp"></script>


<script>
var speed = [];
var h;
var w;
var x = [];
var y = [];
var t = [];
var newx = [];
var newy = [];
var time = [];
var numJellies = 35;
var jCount = 0;

    function clickMe() {
        var el = document.getElementById("sinker");
        el.innerHTML = "You found the king jelly!!!";
    }



function animateDiv(){

    for (i = 0; i < numJellies; i = i + 1) {
        time[i] = time[i] + 1;
        if (time[i] > 2) {
            if (x[i] > w - 100 || x[i] < 100 || y[i] > h - 100 || y[i] < 100) {
                t[i] = t[i] + .6;
            } else {
                if (Math.random() > .6) {
                    t[i] = t[i] + .3;
                } else {
                    t[i] = t[i] - .3;
                }
            }
        } else {
            t[i] = Math.PI*3/2 + Math.random()*.5;
        }
        newx[i] = x[i] + Math.floor (speed[i] * Math.cos( t[i] ));
        newy[i] = y[i] + Math.floor (speed[i] * Math.sin( t[i] ));
        x[i] = newx[i];
        y[i] = newy[i];
    }

    $('.jell').each(function(index, jell){
          
        $(jell).delay(index*20).animate({
            rotate: t[index]*180/Math.PI+90
        }, 200);

        $(jell).animate({
            left: newx[index],
            top: newy[index]
        }, 900, "easeInOutBack");
        
    });
    animateDiv();
};

function animateDivStart() {
    h = $(window).height() - 50;
    w = $(window).width() - 50;

    for (i = 0; i < numJellies; i = i + 1) {
        x[i] = Math.floor(w/12) + Math.floor(Math.random()*5/6*w) - 100;
        y[i] = h + 100;
        t[i] = 2*Math.random()*Math.PI;
        time[i] = 0;
        speed[i] = Math.random()*150+50;
    }
    $('body').addClass('loaded');
    animateDiv();
}
</script>

</body>
</html>
